var http = require('http');
var route = require('./routes');
console.log("route........."+route)

function runServer(){
  var server = http.createServer(function(req,res){
    console.log(req.url)
   var  handler =  route.match(req)

   console.log("handler..........."+handler)
   if(handler){
     handler(req,res)
   }
   else{
     res.end("route not found")
   }
  })
  var listen = function(port){
    server.listen(port,function(){
      console.log("server is listning")
    })
  }
   return {listen : listen,get : route.get};

};

module.exports = runServer;
